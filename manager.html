<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ú–µ–Ω–µ–¥–∂–µ—Ä | –ú–æ–¥–µ—Ä–∞—Ü–∏—è</title>
  <link rel="stylesheet" href="style.css">

  <style>
    /* ===== –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ ===== */
    .manager-topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
      background: var(--surface);
      padding: 18px;
      border-radius: var(--card-radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(0,0,0,0.03);
      margin-bottom: 1.5rem;
    }

    .auth-section {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* ===== –ò–ù–ü–£–¢–´ ===== */
    .login-form {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    .login-input {
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,0.06);
      background: var(--bg);
      font-size: 14px;
      width: 180px;
      transition: var(--transition);
    }

    .login-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: var(--shadow-hover);
      background: white;
    }

    /* ===== –ö–ù–û–ü–ö–ò ===== */
    .login-btn,
    .logout-btn {
      padding: 10px 18px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-size: 14px;
      transition: var(--transition);
      white-space: nowrap;
    }

    .login-btn {
      background: var(--primary);
      color: white;
    }

    .logout-btn {
      background: var(--accent);
      color: white;
    }

    .login-btn:hover,
    .logout-btn:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow-hover);
    }

    .manager-status {
      color: #28a745;
      font-weight: 500;
      font-size: 14px;
    }

    /* ===== –ö–ê–†–¢–û–ß–ö–ò –û–ñ–ò–î–ê–ù–ò–Ø ===== */
    .pending-card {
      background: var(--surface);
      border-radius: var(--card-radius);
      padding: 16px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(0,0,0,0.04);
      border-left: 4px solid #ff9800;
      margin-bottom: 12px;
      transition: var(--transition);
    }

    .pending-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }

    .book-actions {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .approve-btn,
    .reject-btn {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 14px;
      transition: var(--transition);
    }

    .approve-btn {
      background: #28a745;
    }

    .reject-btn {
      background: var(--accent);
    }

    .approve-btn:hover,
    .reject-btn:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow-hover);
    }

    /* ===== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ===== */
    .notification-item {
      background: var(--surface);
      border-radius: 14px;
      padding: 14px;
      margin-bottom: 10px;
      border-left: 4px solid var(--accent);
      box-shadow: var(--shadow);
    }

    /* ===== –°–û–û–ë–©–ï–ù–ò–ï –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ===== */
    #authMessage {
      text-align: center;
      padding: 50px 20px;
      background: var(--surface);
      border-radius: var(--card-radius);
      margin-top: 25px;
      box-shadow: var(--shadow);
    }

    .hidden {
      display: none !important;
    }

    /* ===== –ú–û–ë–ò–õ–ö–ê ===== */
    @media (max-width: 600px) {
      .manager-topbar {
        padding: 14px;
      }

      .login-input {
        width: 100%;
      }

      .login-form {
        width: 100%;
      }

      .login-btn,
      .logout-btn {
        width: 100%;
      }

      .book-actions {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>
  <div class="container">

    <!-- –í–ï–†–• -->
    <div class="manager-topbar">
      <h1>–ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞</h1>

      <div class="auth-section">
        <div id="authStatus" class="hidden">
          <span class="manager-status">ValeriyAleksandrovich</span>
          <button onclick="logout()" class="logout-btn">–í—ã–π—Ç–∏</button>
        </div>

        <div id="loginBlock" class="login-form">
          <input type="text" id="username" class="login-input" placeholder="–õ–æ–≥–∏–Ω" value="ValeriyAleksandrovich">
          <input type="password" id="password" class="login-input" placeholder="–ü–∞—Ä–æ–ª—å">
          <button onclick="login()" class="login-btn">–í–æ–π—Ç–∏</button>
        </div>

        <a href="index.html" class="role-btn">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
      </div>
    </div>

    <!-- –ó–ê–©–ò–©–ï–ù–ù–´–ô –ö–û–ù–¢–ï–ù–¢ -->
    <div id="protectedContent" class="hidden">
      <h2>–û–∂–∏–¥–∞—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ <span id="pendingCount" class="notification-badge">0</span></h2>
      <div id="pendingBooks">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

      <hr>

      <h2>–ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h2>
      <div id="notificationsList">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <!-- –°–û–û–ë–©–ï–ù–ò–ï -->
    <div id="authMessage">
      <h2 style="color: var(--text-light);">üîí –í–æ–π–¥–∏—Ç–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞</h2>
      <p style="color: var(--text-light); margin-top: 8px;">
        –õ–æ–≥–∏–Ω: <b>ValeriyAleksandrovich</b>
      </p>
    </div>

  </div>

  <div id="loader">
    <div class="spinner"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const loader = document.getElementById('loader');
      if (loader) loader.style.display = 'none';
    });

    const MANAGER_CREDENTIALS = {
      username: "ValeriyAleksandrovich",
      password: "V@l3r1y_S3cr3t_P@ssw0rd_2024!xYz"
    };

    function checkAuth() {
      const isAuth = sessionStorage.getItem('managerAuthenticated') === 'true';
      const loginTime = parseInt(sessionStorage.getItem('managerLoginTime') || '0');
      const isValid = isAuth && (Date.now() - loginTime < 60 * 60 * 1000);

      const protectedContent = document.getElementById('protectedContent');
      const authMessage = document.getElementById('authMessage');
      const loginBlock = document.getElementById('loginBlock');
      const authStatus = document.getElementById('authStatus');

      if (isValid) {
        protectedContent.classList.remove('hidden');
        authMessage.classList.add('hidden');
        loginBlock.classList.add('hidden');
        authStatus.classList.remove('hidden');
        sessionStorage.setItem('managerLoginTime', Date.now());
      } else {
        protectedContent.classList.add('hidden');
        authMessage.classList.remove('hidden');
        loginBlock.classList.remove('hidden');
        authStatus.classList.add('hidden');
      }
    }

    window.login = function() {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value;

      if (username === MANAGER_CREDENTIALS.username &&
          password === MANAGER_CREDENTIALS.password) {
        sessionStorage.setItem('managerAuthenticated', 'true');
        sessionStorage.setItem('managerLoginTime', Date.now());
        checkAuth();
        alert('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å');
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
      }
    };

    window.logout = function() {
      sessionStorage.removeItem('managerAuthenticated');
      sessionStorage.removeItem('managerLoginTime');
      checkAuth();
      alert('–í—ã –≤—ã—à–ª–∏');
    };

    document.addEventListener('DOMContentLoaded', checkAuth);
  </script>

  <script type="module" src="app.js"></script>
</body>
</html>
